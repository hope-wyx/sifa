<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>预约查询</title>
    <link rel="stylesheet" href="./css/head.css">
    <link rel="stylesheet" href="./css/rolldate.css">
    <link rel="stylesheet" href="./css/Reservation_query2.css">
    <script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>

    <script src="./js/shipei.js"></script>
    <style>
        .information:nth-child(7) p {
            height: auto;
            float: left;
        }
        
        .information:nth-child(8) p {
            height: 2rem;
        }
        
        input {
            outline: none;
        }
        
        .tishi {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 6rem;
            height: auto;
            margin-left: -3rem;
            padding: .5rem;
            text-align: center;
            background: rgba(0, 0, 0, .5);
            color: #fff;
            border-radius: 0.25rem;
            display: none;
            z-index: 999999999999999;
        }
        
        body .information span.dflkd {
            padding: .25rem;
            background: #196394;
            color: #fff;
            border-radius: .25rem;
            margin-left: .2rem;
        }
        
        .section-information {
            border: 0;
        }
        
        .information {
            width: 100%;
        }
        
        body .information span.beyond {
            background: #aaa;
        }
        
        .inf-text {
            margin-top: 0;
            line-height: 2rem;
            width: 12rem;
        }
        
        .inf-text span {
            word-break: break-all;
        }
    </style>
</head>

<body>
    <header>
        <div class="header">
            <div class="head">
                <div class="img">
                    <a href="javascript:;"> <img onclick="javascript:window.history.go(-1);" src="./img/更多(1).png" alt=""></a>
                </div>
                <div class="title">
                    <p>预约查询</p>
                </div>
            </div>
        </div>
    </header>
    <!-- <div class="seach">
        <input type="text">
        <span>搜索</span>
    </div> -->
    <section>
        <div class="section">

            <!-- <div class="section-information">
                <div class="status">
                    <span>待处理</span>
                </div>
                <div class="information">
                    <p>预约的公证处：</p>
                    <span>牡丹江公证处</span>
                </div>
                <div class="information">
                    <p>预约的当事人：</p>
                    <span>李小龙</span>
                </div>
                <div class="information">
                    <p>预约的公证员：</p>
                    <span>王毅</span>
                </div>
                <div class="information">
                    <p>预约的类别：</p>
                    <span>财产援助</span>
                </div>
                <div class="information">
                    <p>预约的时间：</p>
                    <span>2018-10-21</span>
                </div>
                <div class="information">
                    <p>预约的备注：</p>
                    <div class="inf-text"><span>最近几天有些事情，希望可以预约在下个月的下旬</span></div>
                </div>
                <div class="information ldfg" style="height: 5rem;">
                    <p>满意度评价：</p>
                    <div class="text-txt">
                        <span><input type="radio"name="evaluate">非常满意</span>
                        <span><input type="radio"name="evaluate">满意</span><br>
                        <span><input type="radio"name="evaluate">一般</span>
                        <span><input type="radio"name="evaluate">不满意</span>
                    </div>
                </div>
                <div style="width: 80%;height: 3rem; margin: .5rem auto;">
                    <div class="btn" onclick="window.location.href= 'fair.html';return false" style="margin-top: 0; float: left;">
                        确认提交
                    </div>
                    <div class="btn" onclick="window.location.href= '';return false" style="margin-top: 0; float: right;clear: none;">
                        取消预约
                    </div>
                </div>
            </div> -->
        </div>
    </section>
    <div class="ggyuyue">
        <div class="quiso"></div>
        <div class="dlkf">

            <div style="    text-align: center; ">
                <p>更改预约时间</p>
                <input type="text" class="odfos" onfocus="this.blur()" placeholder="请选择预约时间" readonly="readonly">
            </div>
            <div style=" text-align: center; ">
                <button class="quid">确定</button>
                <button class="fsfd">取消</button>
            </div>
        </div>
    </div>
    <div style="width: 100%;height:3.125rem"></div>
    <div class="footer"></div>
</body>
<style>
    .ggyuyue {
        position: fixed;
        top: 0;
        left: 0;
        display: none;
        width: 100%;
        background: rgba(0, 0, 0, .5);
        height: 92.5%;
    }
    
    .quiso {
        width: 100%;
        height: 100%;
    }
    
    .dlkf {
        position: absolute;
        top: 50%;
        left: 50%;
        margin-left: -9.5rem;
        width: 18rem;
        height: 10rem;
        margin-top: -5rem;
        background: #fff;
        border-radius: .25rem;
        padding: .5rem;
    }
    
    .dlkf p {
        height: 2rem;
        line-height: 2rem;
        text-align: center;
        font-size: 1rem;
        border-bottom: 1px solid #999;
    }
    
    .dlkf input {
        width: 9.5rem;
        margin: 1.5rem auto;
        height: 2rem;
        padding-left: .5rem;
    }
    
    .dlkf button {
        padding: .5rem 2rem;
        border: 0;
        border-radius: .25rem;
        color: #fff;
        background: #196394;
    }
    
    .Enclosure {
        padding: .1rem 2.5rem;
        background: rgba(242, 242, 242, 1);
        border-radius: .7rem;
    }
</style>
<script type="text/javascript">
    $(".footer").load("footer2.html");
</script>
<script src="js/rolldate.js"></script>
<script>
    function getUrlParms(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        console.log(reg);
        var r = window.location.search.substr(1).match(reg);
        if (r != null)
            return unescape(r[2]);
        return null;
    }


    function showTips(text) {
        $("body").append('<p class="tishi">' + text + '</p>');
        if ($(".tishi").css('display') == 'none') {
            $(".tishi").stop(true).fadeIn();
            setTimeout(function() {
                $(".tishi").fadeOut();
            }, 1500);
            setTimeout(function() {
                $(".tishi").remove();
            }, 2000)
        }
    }
    var access_token = localStorage.getItem("access_token");
    var id = getUrlParms('id');
    var type = getUrlParms('type');

    if (access_token == "") {
        // alert("请登录");
        window.location.href = "login.html";
    } else {
        $.ajax({
            type: "POST",
            url: "https://sft.t7c.net/index.php/home/Personal/mine",
            data: {
                access_token: access_token
            },
            dataType: 'json',
            success: function(data) {
                if (data.state != "1") {
                    window.location.href = "login.html";
                }


            }
        })
    }
    //个人信息
    //<p>预约的接待人员：</p><span>' + data.data.jgry_mobile + '</span>
/*<p>预约的接待人员：</p><span>' + data.data.jgry_mobile + '</span>
<p>预约的接待人员：</p><span>' + data.data.jgry_mobile + '</span>
<p>预约的接待人员：</p><span>' + data.data.jgry_mobile + '</span>
<p>预约的接待人员：</p><span>' + data.data.jgry_mobile + '</span>
<p>预约的接待人员：</p><span>' + data.data.jgry_mobile + '</span>*/
    var myname;
    var yyudata;
    var orderTime = "";
    $.ajax({
        type: 'post',
        url: 'https://sft.t7c.net/index.php/home/Personal/mine',
        async: false,
        data: {
            access_token: access_token
        },
        dataType: 'json',
        async: true, //同步异步
        success: function(data) {
            console.log(data);
            myname = data.data.xm;
            $.ajax({
                type: "post",
                url: "https://sft.t7c.net/index.php/home/Handle/order_list",
                async: false,
                data: {
                    access_token: access_token,
                    id: id,
                    type: "2"
                },
                dataType: "json",
                success: function(data) {
                    console.log(data);
                    var ht = "";
                    var status, state, pinjia;
                    orderTime = $.myTime.DateToUnix(data.data.order_time);
                    yyudata = orderTime;
                    if (data.data.status == 0) {
                        status = "待处理";
                        ht += '<div class="section-information" ><div class="status"><span class="sda">' + status + '</span></div><div class="information"><p>预约的法援中心：</p><span style="width: 9rem;line-height:2rem;vertical-align:top;" >' + data.data.jg_name + '</span></div><div class="information"><p>预约的当事人：</p><span>' + myname + '</span></div><div class="information"></div><div class="information"><p>预约的类别：</p><span>' + data.data.order_type + '</span></div><div class="information"><p>预约的时间：</p><span>' + data.data.order_time + '</span><span class="dflkd">修改时间</span></div><div class="information"><p>预约的备注：</p><div class="inf-text"><span>' + data.data.order_note + '</span></div></div><div class="information" style="padding-bottom: 4rem;"><p>包含附件：</p><span class="Enclosure" id="'+ data.data.id +'">' + myname[0] + '...的附件资料</span></div><div class="btn quxiao"  style="margin-top: 0; float: left;margin-top: -2.5rem; margin-left: 8rem;" id=' + data.data.id + '>取消预约</div></div>'
                    } else if (data.data.status == 1) {
                        status = "待审批";
                        ht += '<div class="section-information" ><div class="status"><span class="sda">' + status + '</span></div><div class="information"><p>预约的法援中心：</p><span style="width: 9rem;line-height:2rem;vertical-align:top;" >' + data.data.jg_name + '</span></div><div class="information"><p>预约的当事人：</p><span>' + myname + '</span></div><div class="information"></div><div class="information"><p>预约的类别：</p><span>' + data.data.order_type + '</span></div><div class="information"><p>预约的时间：</p><span>' + data.data.order_time + '</span><span class="dflkd">修改时间</span></div><div class="information"><p>预约的备注：</p><div class="inf-text"><span>' + data.data.order_note + '</span></div></div><div class="information" style="padding-bottom: 4rem;"><p>包含附件：</p><span class="Enclosure" id="'+ data.data.id +'">' + myname[0] + '...的附件资料</span></div><div class="btn quxiao"  style="margin-top: 0; float: left;margin-top: -2.5rem; margin-left: 8rem;" id=' + data.data.id + '>取消预约</div></div>'
                    } else if (data.data.status == 2) {
                        status = "已通过";

                        ht += '<div class="section-information" ><div class="status"><span class="sda">' + status + '</span></div><div class="information"><p>预约的法援中心：</p><span style="width: 9rem;line-height:2rem;vertical-align:top;" >' + data.data.jg_name + '</span></div><div class="information"><p>预约的当事人：</p><span>' + myname + '</span></div><div class="information"></div><div class="information"><p>预约的类别：</p><span>' + data.data.order_type + '</span></div><div class="information"><p>预约的时间：</p><span>' + data.data.order_time + '</span><span class="dflkd">修改时间</span></div><div class="information"><p>预约的备注：</p><div class="inf-text"><span>' + data.data.order_note + '</span></div></div><div class="information" style="padding-bottom: 4rem;"><p>包含附件：</p><span class="Enclosure" id="'+ data.data.id +'">' + myname[0] + '...的附件资料</span></div><div class="btn quxiao"  style="margin-top: 0; float: left;margin-top: -2.5rem; margin-left: 8rem;" id=' + data.data.id + '>取消预约</div></div>'
                    } else if (data.data.status == 3) {
                        status = "处理中";

                        ht += '<div class="section-information" ><div class="status"><span class="sda">' + status + '</span></div><div class="information"><p>预约的法援中心：</p><span style="width: 9rem;line-height:2rem;vertical-align:top;" >' + data.data.jg_name + '</span></div><div class="information"><p>预约的当事人：</p><span>' + myname + '</span></div><div class="information"></div><div class="information"><p>预约的类别：</p><span>' + data.data.order_type + '</span></div><div class="information"><p>预约的时间：</p><span>' + data.data.order_time + '</span><span class="dflkd">修改时间</span></div><div class="information"><p>预约的备注：</p><div class="inf-text"><span>' + data.data.order_note + '</span></div></div><div class="information" style="padding-bottom: 4rem;"><p>包含附件：</p><span class="Enclosure" id="'+ data.data.id +'">' + myname[0] + '...的附件资料</span></div></div>'
                    } else if (data.data.status == 4) {
                        status = "已撤销";
                        state = data.data.evaluate;
                        if (state == 1) {
                            pinjia = "非常满意"
                        } else if (state == 2) {
                            pinjia = "满意"
                        } else if (state == 3) {
                            pinjia = "一般"
                        } else if (state == 4) {
                            pinjia = "不满意"
                        } else {

                        }
                        ht += '<div class="section-information" ><div class="status"><span class="sda">' + status + '</span></div><div class="information"><p>预约的法援中心：</p><span style="width: 9rem;line-height:2rem;vertical-align:top;" >' + data.data.jg_name + '</span></div><div class="information"><p>预约的当事人：</p><span>' + myname + '</span></div><div class="information"></div><div class="information"><p>预约的类别：</p><span>' + data.data.order_type + '</span></div><div class="information"><p>预约的时间：</p><span>' + data.data.order_time + '</span></div><div style="padding-bottom: 1.5rem;" class="information"><p>预约的备注：</p><div class="inf-text"><span>' + data.data.order_note + '</span></div></div><div class="information" style="padding-bottom: 4rem;"><p>包含附件：</p><span class="Enclosure" id="'+ data.data.id +'">' + myname[0] + '...的附件资料</span></div></div>'

                    } else if (data.data.status == 5) {
                        status = "待评价";
                        ht += '<div class="section-information" ><div class="status"><span class="sda">' + status + '</span></div><div class="information"><p>预约的法援中心：</p ><span style="width: 9rem;line-height:2rem;vertical-align:top;" >' + data.data.jg_name + '</span></div><div class="information"><p>预约的当事人：</p ><span>' + myname + '</span></div><div class="information"><p>预约的接待人员：</p ><span>' + data.data.jgry_mobile + '</span></div><div class="information"><p>预约的类别：</p ><span>' + data.data.order_type + '</span></div><div class="information"><p>预约的时间：</p ><span>' + data.data.order_time + '</span></div><div class="information"><p>预约的备注：</p ><div class="inf-text"><span>' + data.data.order_note + '</span></div></div><div class="information" style="padding-bottom: 4rem;"><p>包含附件：</p><span class="Enclosure" id="'+ data.data.id +'">' + myname[0] + '...的附件资料</span></div><div class="information ldfg" style="height: 5rem;"><p>满意度评价：</p ><div class="text-txt"><span><input type="radio"name="evaluate" value="1">非常满意</span><span><input type="radio"name="evaluate" value="2">满意</span><br><span><input type="radio"name="evaluate" value="3">一般</span><span><input type="radio"name="evaluate" value="4">不满意</span></div></div><div style="width: 80%;height: 3rem; margin: .5rem auto;"><div class="btn quedin"  style="margin-top: 0;" id=' + data.data.id + '>确认提交</div></div></div>'

                    } else if (data.data.status == 6) {
                        status = "已评价";
                        state = data.data.evaluate;
                        if (state == 1) {
                            pinjia = "非常满意"
                        } else if (state == 2) {
                            pinjia = "满意"
                        } else if (state == 3) {
                            pinjia = "一般"
                        } else if (state == 4) {
                            pinjia = "不满意"
                        }
                        ht += '<div class="section-information" ><div class="status"><span class="sda">' + status + '</span></div><div class="information"><p>预约的法援中心：</p ><span style="width: 9rem;line-height:2rem;vertical-align:top;" >' + data.data.jg_name + '</span></div><div class="information"><p>预约的当事人：</p ><span>' + myname + '</span></div><div class="information"><p>预约的接待人员：</p ><span>' + data.data.jgry_name + '</span></div><div class="information"><p>预约的类别：</p ><span>' + data.data.order_type + '</span></div><div class="information"><p>预约的时间：</p ><span>' + data.data.ct_time + '</span></div><div class="information"><p>预约的备注：</p ><div class="inf-text"><span>' + data.data.order_note + '</span></div></div><div class="information ldfg" style="height: 5rem;"><p>满意度评价：</p ><div class="text-txt" style="margin-right:6rem;"><span><input type="radio"name="evaluate' + i + '" checked value="1">' + pinjia + '</span></div></div></div>'
                    } else if (data.data.status == 7) {
                        status = "未通过";

                        ht += '<div class="section-information" ><div class="status"><span class="sda">' + status + '</span></div><div class="information"><p>预约的法援中心：</p><span style="width: 9rem;line-height:2rem;vertical-align:top;" >' + data.data.jg_name + '</span></div><div class="information"><p>预约的当事人：</p><span>' + myname + '</span></div><div class="information"></div><div class="information"><p>预约的类别：</p><span>' + data.data.order_type + '</span></div><div class="information"><p>预约的时间：</p><span>' + data.data.order_time + '</span></div><div class="information"><p>预约的备注：</p><div class="inf-text"><span>' + data.data.order_note + '</span></div></div><div class="information" style="padding-bottom: 4rem;"><p>包含附件：</p><span class="Enclosure" id="'+ data.data.id +'">' + myname[0] + '...的附件资料</span></div></div>'
                    }
                    // ht += '<div class="section-information"><div class="status"><span class="sda">'+status+'</span></div><div class="information"><p>预约的公证处：</p><span style="width: 9rem;line-height:2rem;vertical-align:top;" >'+data.data[i].jg_name+'</span></div><div class="information"><p>预约的当事人：</p><span>'+myname+'</span></div><div class="information"><p>预约的公证员：</p><span>'+data.data[i].jgry_name+'</span></div><div class="information"><p>预约的类别：</p><span>'+data.data[i].order_type+'</span></div><div class="information"><p>预约的时间：</p><span>'+data.data[i].ct_time+'</span></div><div class="information"><p>预约的备注：</p><div class="inf-text"><span>'+data.data[i].order_note+'</span></div></div><div class="information ldfg" style="height: 5rem;"><p>满意度评价：</p><div class="text-txt"><span><input type="radio"name="evaluate" value="1">非常满意</span><span><input type="radio"name="evaluate" value="2">满意</span><br><span><input type="radio"name="evaluate" value="3">一般</span><span><input type="radio"name="evaluate" value="4">不满意</span></div></div><div style="width: 80%;height: 3rem; margin: .5rem auto;"><div class="btn quedin"  style="margin-top: 0; float: left;" id='+data.data[i].id+'>确认提交</div><div class="btn quxiao"  style="margin-top: 0; float: right;clear: none;" id='+data.data[i].id+'>取消预约</div></div></div>' 

                    $(".section").html(ht);
                    if (data.data.save_status == 1) {
                        $('.dflkd').addClass('beyond');
                        $('.dflkd').attr('index', '2');
                    }
                    var btn = document.getElementsByClassName('quedin');
                    for (var i = 0; i < btn.length; i++) {
                        btn[i].addEventListener("click", function() {
                            if ($(this).parent().siblings(".ldfg").find("input:radio").is(":checked") == false) {
                                showTips("请评价")
                            } else {
                                var id = $(this).attr("id");
                                var pj;
                                $(this).parent().siblings(".ldfg").find("input:radio").each(function(j) {
                                    if (this.checked) {
                                        pj = $(this).val();
                                    }
                                });
                                $.ajax({
                                    type: "post",
                                    url: "https://sft.t7c.net/index.php/home/Handle/order_evaluate",
                                    data: {
                                        access_token: access_token,
                                        type: "2",
                                        evaluate: pj,
                                        id: id
                                    },
                                    dataType: "json",
                                    success: function(data) {
                                        console.log(data);
                                        showTips(data.msg)
                                        window.location.reload();
                                    }
                                })
                            }
                        })
                    }
                    $(".section .section-information").on('click', '.quxiao', function() {

                        var id = $(this).attr("id");
                        console.log(id)
                        var pj;
                        // $(this).parent().siblings(".ldfg").find("input:radio").each(function(j){
                        //     if(this.checked){
                        //         pj=$(this).val();
                        //     }
                        // });
                        $.ajax({
                                type: "post",
                                url: "https://sft.t7c.net/index.php/home/Handle/order_cancel",
                                data: {
                                    access_token: access_token,
                                    type: "2",
                                    // evaluate:pj,
                                    id: id
                                },
                                dataType: "json",
                                success: function(data) {
                                    console.log(data);
                                    if (data.state == 1) {
                                        showTips(data.msg)
                                        window.location.reload();
                                    } else {
                                        showTips(data.msg)
                                    }
                                }
                            })
                            // }


                    })
                    var btn1 = document.getElementsByClassName('quxiao');
                    for (var i = 0; i < btn.length; i++) {
                        btn1[i].addEventListener("click", function() {
                            // if($(this).parent().siblings(".ldfg").find("input:radio").is(":checked")==false){
                            //     showTips("请评价")
                            // }else{
                            //         var id = $(this).attr("id");
                            //         console.log(id)
                            //         var pj;
                            //         $(this).parent().siblings(".ldfg").find("input:radio").each(function(j){
                            //             if(this.checked){
                            //                 pj=$(this).val();
                            //             }
                            //         });
                            //         $.ajax({
                            //             type:"post",
                            //             url:"https://sft.t7c.net/index.php/home/Handle/order_cancel",
                            //             data:{
                            //                 access_token:access_token,
                            //                 type:"1",
                            //                 // evaluate:pj,
                            //                 id:id
                            //             },
                            //             dataType:"json",
                            //             success:function(data){
                            //                 console.log(data);
                            //                 // if(data.status==1){
                            //                     showTips(data.msg)

                            //                     window.location.reload();
                            //                 // }
                            //             }
                            //         })  
                            //     // }

                        })
                    }
                },
                error: function() {
                    showTips("服务器连接失败，请稍后再试");
                }
            });
        }
    })

    function getNow(s) {
        return s < 10 ? '0' + s : s;
    }
    setInterval(function() {
        /**
         * 
         * 获取当前时间
         */
        var myDate = new Date();
        //获取当前年
        var year = myDate.getFullYear();
        //获取当前月
        var month = myDate.getMonth() + 1;
        //获取当前日
        var date = myDate.getDate();
        var h = myDate.getHours(); //获取当前小时数(0-23)
        var m = myDate.getMinutes(); //获取当前分钟数(0-59)
        var s = myDate.getSeconds();

        var now = $.myTime.DateToUnix(year + '-' + getNow(month) + "-" + getNow(date) + " " + getNow(h) + ':' + getNow(m) + ":" + getNow(s));
        if (now > orderTime) {
            $('.dflkd').addClass('beyond');
            $('.dflkd').attr('index', '1');
        }
    }, 1000);
    var datdfda;
    new rolldate.Date({
        el: '.odfos',
        format: 'YYYY-MM-DD hh:mm',
        beginYear: 1990,
        endYear: 2020,
        confirmBefore: function(el, date) {
            var d = Date.parse(new Date()) / 1000;

            datdfda = new Date(date).getTime() / 1000;
            if (datdfda <= d) {
                // tishi('选择日期不能小于当前时间');
                showTips('选择日期不能小于当前时间');
                return false;
            };
            console.log(yyudata + ',' + datdfda)
            if (datdfda < yyudata) {
                // tishi('所选时间必需在预约时间之后');
                showTips('所选时间必需在预约时间之后');
                $(".odfos").val("");
                return false;
            }
        }
    })



    $("body").on('click', '.Enclosure', function() {
        var id = $(this).attr('id');
        localStorage.setItem('fujian', 'https://sft.t7c.net/index.php/home/Handle/order_list');
        window.location.href = 'Enclosurezhiliao.html?id=' + id + '&status=' + 2 + '&type=' + 2;
    })
    $(".section").on('click', '.dflkd', function() {
        if ($(this).hasClass("beyond")) {
            if ($(this).attr("index") == 1) {
                showTips('您的预约时间已过，请重新预约');
            } else {
                showTips('您已修改过预约时间，不可重复修改');
            }
        } else {
            $(".ggyuyue").fadeIn();
        }
    });
    $("body").on('click', '.quid,.quiso,.fsfd', function() {
        $(".ggyuyue").fadeOut();
    })
    $(".quid").on('click', function() {
            if (datdfda == undefined) {
                showTips('请选择更改时间');
                return false;
            }
            $.ajax({
                type: 'post',
                url: 'https://sft.t7c.net/index.php/home/Handle/order_savetime',
                data: {
                    access_token: access_token,
                    type: "2",
                    id: id,
                    order_time: datdfda
                },
                dataType: 'json',
                async: false, //同步异步
                success: function(data) {
                    console.log(data);
                    showTips(data.msg);
                    window.location.reload();
                }
            })
        })
        // {
        // onclick="window.location.href= 'fair.html';return false"
        // }
    $.extend({
        myTime: {
            CurTime: function() {
                return Date.parse(new Date()) / 1000;
            },
            DateToUnix: function(string) {
                var f = string.split(' ', 2);
                var d = (f[0] ? f[0] : '').split('-', 3);
                var t = (f[1] ? f[1] : '').split(':', 3);
                return (new Date(
                    parseInt(d[0], 10) || null,
                    (parseInt(d[1], 10) || 1) - 1,
                    parseInt(d[2], 10) || null,
                    parseInt(t[0], 10) || null,
                    parseInt(t[1], 10) || null,
                    parseInt(t[2], 10) || null
                )).getTime() / 1000;
            },
            UnixToDate: function(unixTime, isFull, timeZone) {
                if (typeof(timeZone) == 'number') {
                    unixTime = parseInt(unixTime) + parseInt(timeZone) * 60 * 60;
                }
                var time = new Date(unixTime * 1000);
                var ymdhis = "";
                ymdhis += time.getUTCFullYear() + "-";
                ymdhis += (time.getUTCMonth() + 1) + "-";
                ymdhis += time.getUTCDate();
                if (isFull === true) {
                    ymdhis += "" + time.getUTCHours() + ":";
                    ymdhis += time.getUTCMinutes() + ":";
                    ymdhis += time.getUTCSeconds();
                }
                return ymdhis;
            }
        }
    });
</script>


</html>